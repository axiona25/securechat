#!/usr/bin/env python3
"""Generate l10n JSON files from it.json with translations for each language."""
import json
import os
import sys
sys.path.insert(0, os.path.dirname(__file__))
from l10n_data import get_de, get_pt
try:
    from l10n_data import get_ru, get_zh, get_ja, get_ar, get_ko, get_hi, get_tr, get_pl, get_nl, get_ro
except ImportError:
    get_ru = get_zh = get_ja = get_ar = get_ko = get_hi = get_tr = get_pl = get_nl = get_ro = None

BASE = os.path.join(os.path.dirname(__file__), '..', 'assets', 'l10n')
with open(os.path.join(BASE, 'it.json'), encoding='utf-8') as f:
    IT = json.load(f)
KEYS = list(IT.keys())

# Translations: key -> value for each language (same keys as it.json)
TRANSLATIONS = {
    "es": {
        "app_name": "SecureChat",
        "app_subtitle": "Mensajería Privada y Segura",
        "welcome_back": "¡Bienvenido de nuevo!",
        "login_subtitle": "Inicia sesión para continuar",
        "create_account": "Crea tu cuenta",
        "signup_subtitle": "Regístrate para empezar",
        "email": "Correo electrónico",
        "password": "Contraseña",
        "confirm_password": "Confirmar Contraseña",
        "full_name": "Nombre Completo",
        "new_password": "Nueva Contraseña",
        "login": "Iniciar Sesión",
        "sign_up": "Registrarse",
        "logout": "Cerrar Sesión",
        "confirm_logout": "¿Estás seguro de que quieres cerrar sesión?",
        "forgot_password": "¿Olvidaste tu contraseña?",
        "already_have_account": "¿Ya tienes una cuenta? ",
        "dont_have_account": "¿No tienes una cuenta? ",
        "or_continue_with": "o continúa con",
        "terms_agreement": "Al registrarte, aceptas los ",
        "and": " y ",
        "terms_of_service": "Términos de Servicio",
        "privacy_policy": "Política de Privacidad",
        "chats": "Chats",
        "calls": "Llamadas",
        "security": "Seguridad",
        "settings": "Ajustes",
        "no_conversations": "Sin conversaciones",
        "start_new_chat": "Inicia un nuevo chat para empezar",
        "search_chats": "Buscar chats o contactos",
        "new_chat": "Nuevo Chat",
        "new_group": "Nuevo Grupo",
        "new_broadcast_list": "Nueva Lista de Difusión",
        "broadcast_list_name": "Nombre de la Lista de Difusión",
        "group_name_step": "Nombre del grupo",
        "search_by_name": "Buscar por nombre o email...",
        "cannot_start_chat": "No se puede iniciar el chat",
        "group": "Grupo",
        "groups": "Grupos",
        "favourite": "Favorito",
        "favourites": "Favoritos",
        "send_message": "Enviar un mensaje...",
        "type_message": "Escribe un mensaje",
        "photo": "Foto",
        "camera": "Cámara",
        "document": "Documento",
        "audio": "Audio",
        "video": "Vídeo",
        "location": "Ubicación",
        "contact": "Contacto",
        "online": "En línea",
        "offline": "Desconectado",
        "typing": "escribiendo...",
        "last_seen": "Última vez",
        "today": "Hoy",
        "yesterday": "Ayer",
        "delete": "Eliminar",
        "delete_message": "Eliminar mensaje",
        "delete_for_me": "Eliminar para mí",
        "delete_for_all": "Eliminar para todos",
        "copy": "Copiar",
        "forward": "Reenviar",
        "reply": "Responder",
        "pin": "Fijar",
        "unpin": "Desfijar",
        "star": "Favorito",
        "unstar": "Quitar favorito",
        "account": "Cuenta",
        "privacy": "Privacidad",
        "notifications": "Notificaciones",
        "chat_settings": "Ajustes de Chat",
        "data_storage": "Datos y Almacenamiento",
        "language": "Idioma",
        "help": "Ayuda",
        "invite_friends": "Invitar Amigos",
        "block_user": "Bloquear usuario",
        "unblock_user": "Desbloquear usuario",
        "report_user": "Reportar usuario",
        "clear_chat": "Vaciar chat",
        "mute_notifications": "Silenciar notificaciones",
        "unmute_notifications": "Activar notificaciones",
        "create_group": "Crear Grupo",
        "group_name": "Nombre del Grupo",
        "group_description": "Descripción",
        "add_members": "Añadir miembros",
        "leave_group": "Abandonar grupo",
        "group_info": "Info del Grupo",
        "admin": "Admin",
        "member": "Miembro",
        "encryption_enabled": "Cifrado E2E activo",
        "messages_encrypted": "Los mensajes están cifrados de extremo a extremo",
        "cancel": "Cancelar",
        "save": "Guardar",
        "share": "Compartir",
        "confirm": "Confirmar",
        "ok": "OK",
        "done": "Hecho",
        "next": "Siguiente",
        "back": "Atrás",
        "close": "Cerrar",
        "edit": "Editar",
        "add": "Añadir",
        "remove": "Eliminar",
        "search": "Buscar",
        "loading": "Cargando...",
        "error": "Error",
        "retry": "Reintentar",
        "success": "Éxito",
        "change_password": "Cambiar Contraseña",
        "change_password_desc": "Por seguridad, debes cambiar tu contraseña temporal en el primer acceso.",
        "save_new_password": "Guardar Nueva Contraseña",
        "min_8_chars": "Mínimo 8 caracteres",
        "passwords_dont_match": "Las contraseñas no coinciden",
        "password_changed": "¡Contraseña actualizada con éxito!",
        "registration_success": "¡Registro exitoso!",
        "redirect_to_login": "Serás redirigido al inicio de sesión.",
        "pending_approval": "Cuenta pendiente de aprobación por el administrador.",
        "user_blocked": "Usuario bloqueado temporalmente. Contacta al administrador.",
        "invalid_credentials": "Credenciales no válidas.",
        "no_results": "Sin resultados",
        "select_language": "Seleccionar Idioma",
        "language_changed": "Idioma cambiado con éxito",
        "voice_call": "Llamada de voz",
        "video_call": "Videollamada",
        "no_calls": "Sin llamadas",
        "attach": "Adjuntar",
        "open_with": "Abrir con",
        "add_to_favourites": "Añadir a favoritos",
        "remove_from_favourites": "Quitar de favoritos",
        "encrypted_audio": "Audio cifrado",
        "encrypted_video": "Vídeo cifrado",
        "encrypted_document": "Documento cifrado",
        "encrypted_attachment": "Adjunto cifrado",
        "select_all": "Seleccionar todo",
        "deselect_all": "Deseleccionar todo",
        "selected": "seleccionados",
        "bio": "Bio",
        "phone": "Teléfono",
        "username": "Usuario",
        "profile": "Perfil",
        "edit_profile": "Editar Perfil",
        "avatar_updated": "Avatar actualizado",
        "read_receipts": "Confirmaciones de lectura",
        "last_seen_visible": "Última vez visible",
        "theme": "Tema",
        "wallpaper": "Fondo",
        "away": "Ausente",
        "busy": "Ocupado",
        "available": "Disponible",
        "new_message": "Nuevo mensaje",
        "no_message": "Sin mensaje",
        "delete_chat": "Eliminar chat",
        "unmute_notifications_short": "Activar notificaciones",
        "mute_short": "Silenciar",
        "remove_lock": "Quitar bloqueo",
        "enable_lock": "Activar bloqueo",
        "stay_here": "Quedarse aquí",
        "coming_soon": "Próximamente",
        "email_required": "Introduce tu email",
        "email_invalid": "Introduce un email válido",
        "password_required": "Introduce la contraseña",
        "password_min_6": "La contraseña debe tener al menos 6 caracteres",
        "full_name_required": "Introduce tu nombre completo",
        "name_min_2": "El nombre debe tener al menos 2 caracteres",
        "password_min_8": "La contraseña debe tener al menos 8 caracteres",
        "password_uppercase": "La contraseña debe contener una letra mayúscula",
        "password_number": "La contraseña debe contener un número",
        "confirm_password_required": "Confirma la contraseña",
        "fill_both_fields": "Rellena ambos campos.",
        "error_change_password": "Error al cambiar la contraseña.",
        "error_connection": "Error de conexión. Inténtalo de nuevo.",
        "new_password_label": "NUEVA CONTRASEÑA",
        "confirm_password_label": "CONFIRMAR CONTRASEÑA",
        "hint_new_password": "Introduce la nueva contraseña",
        "hint_confirm_new_password": "Confirma la nueva contraseña",
        "reset_password": "Restablecer Contraseña",
        "reset_password_desc": "Introduce tu email y te enviaremos un enlace para restablecer la contraseña.",
        "send_reset_link": "Enviar enlace de restablecimiento",
        "reset_link_sent": "¡Enlace enviado! Revisa tu email.",
        "hint_email": "Introduce tu email",
        "hint_password": "Introduce tu contraseña",
        "hint_full_name": "Introduce tu nombre completo",
        "hint_confirm_password": "Confirma la contraseña",
        "terms_coming_soon": "Términos de Servicio — próximamente",
        "privacy_coming_soon": "Política de Privacidad — próximamente",
        "google_signin_soon": "Inicio de sesión con Google próximamente",
        "apple_signin_soon": "Inicio de sesión con Apple próximamente",
    },
    "fr": {
        "app_name": "SecureChat",
        "app_subtitle": "Messagerie privée et sécurisée",
        "welcome_back": "Bon retour !",
        "login_subtitle": "Connectez-vous pour continuer",
        "create_account": "Créez votre compte",
        "signup_subtitle": "Inscrivez-vous pour commencer",
        "email": "E-mail",
        "password": "Mot de passe",
        "confirm_password": "Confirmer le mot de passe",
        "full_name": "Nom complet",
        "new_password": "Nouveau mot de passe",
        "login": "Connexion",
        "sign_up": "S'inscrire",
        "logout": "Déconnexion",
        "confirm_logout": "Êtes-vous sûr de vouloir vous déconnecter ?",
        "forgot_password": "Mot de passe oublié ?",
        "already_have_account": "Vous avez déjà un compte ? ",
        "dont_have_account": "Vous n'avez pas de compte ? ",
        "or_continue_with": "ou continuer avec",
        "terms_agreement": "En vous inscrivant, vous acceptez les ",
        "and": " et ",
        "terms_of_service": "Conditions d'utilisation",
        "privacy_policy": "Politique de confidentialité",
        "chats": "Chats",
        "calls": "Appels",
        "security": "Sécurité",
        "settings": "Paramètres",
        "no_conversations": "Aucune conversation",
        "start_new_chat": "Démarrez une nouvelle conversation",
        "search_chats": "Rechercher des chats ou contacts",
        "new_chat": "Nouveau chat",
        "new_group": "Nouveau groupe",
        "new_broadcast_list": "Nouvelle liste de diffusion",
        "broadcast_list_name": "Nom de la liste de diffusion",
        "group_name_step": "Nom du groupe",
        "search_by_name": "Rechercher par nom ou e-mail...",
        "cannot_start_chat": "Impossible de démarrer le chat",
        "group": "Groupe",
        "groups": "Groupes",
        "favourite": "Favori",
        "favourites": "Favoris",
        "send_message": "Envoyer un message...",
        "type_message": "Écrivez un message",
        "photo": "Photo",
        "camera": "Appareil photo",
        "document": "Document",
        "audio": "Audio",
        "video": "Vidéo",
        "location": "Position",
        "contact": "Contact",
        "online": "En ligne",
        "offline": "Hors ligne",
        "typing": "écrit...",
        "last_seen": "Dernière connexion",
        "today": "Aujourd'hui",
        "yesterday": "Hier",
        "delete": "Supprimer",
        "delete_message": "Supprimer le message",
        "delete_for_me": "Supprimer pour moi",
        "delete_for_all": "Supprimer pour tous",
        "copy": "Copier",
        "forward": "Transférer",
        "reply": "Répondre",
        "pin": "Épingler",
        "unpin": "Désépingler",
        "star": "Favori",
        "unstar": "Retirer des favoris",
        "account": "Compte",
        "privacy": "Confidentialité",
        "notifications": "Notifications",
        "chat_settings": "Paramètres du chat",
        "data_storage": "Données et stockage",
        "language": "Langue",
        "help": "Aide",
        "invite_friends": "Inviter des amis",
        "block_user": "Bloquer l'utilisateur",
        "unblock_user": "Débloquer l'utilisateur",
        "report_user": "Signaler l'utilisateur",
        "clear_chat": "Effacer le chat",
        "mute_notifications": "Désactiver les notifications",
        "unmute_notifications": "Activer les notifications",
        "create_group": "Créer un groupe",
        "group_name": "Nom du groupe",
        "group_description": "Description",
        "add_members": "Ajouter des membres",
        "leave_group": "Quitter le groupe",
        "group_info": "Infos du groupe",
        "admin": "Admin",
        "member": "Membre",
        "encryption_enabled": "Chiffrement E2E activé",
        "messages_encrypted": "Les messages sont chiffrés de bout en bout",
        "cancel": "Annuler",
        "save": "Enregistrer",
        "share": "Partager",
        "confirm": "Confirmer",
        "ok": "OK",
        "done": "Terminé",
        "next": "Suivant",
        "back": "Retour",
        "close": "Fermer",
        "edit": "Modifier",
        "add": "Ajouter",
        "remove": "Supprimer",
        "search": "Rechercher",
        "loading": "Chargement...",
        "error": "Erreur",
        "retry": "Réessayer",
        "success": "Succès",
        "change_password": "Changer le mot de passe",
        "change_password_desc": "Pour des raisons de sécurité, vous devez changer votre mot de passe temporaire à la première connexion.",
        "save_new_password": "Enregistrer le nouveau mot de passe",
        "min_8_chars": "Minimum 8 caractères",
        "passwords_dont_match": "Les mots de passe ne correspondent pas",
        "password_changed": "Mot de passe mis à jour avec succès !",
        "registration_success": "Inscription réussie !",
        "redirect_to_login": "Vous serez redirigé vers la connexion.",
        "pending_approval": "Compte en attente d'approbation par l'administrateur.",
        "user_blocked": "Utilisateur temporairement bloqué. Contactez l'administrateur.",
        "invalid_credentials": "Identifiants invalides.",
        "no_results": "Aucun résultat",
        "select_language": "Sélectionner la langue",
        "language_changed": "Langue modifiée avec succès",
        "voice_call": "Appel vocal",
        "video_call": "Visioconférence",
        "no_calls": "Aucun appel",
        "attach": "Joindre",
        "open_with": "Ouvrir avec",
        "add_to_favourites": "Ajouter aux favoris",
        "remove_from_favourites": "Retirer des favoris",
        "encrypted_audio": "Audio chiffré",
        "encrypted_video": "Vidéo chiffrée",
        "encrypted_document": "Document chiffré",
        "encrypted_attachment": "Pièce jointe chiffrée",
        "select_all": "Tout sélectionner",
        "deselect_all": "Tout désélectionner",
        "selected": "sélectionnés",
        "bio": "Bio",
        "phone": "Téléphone",
        "username": "Nom d'utilisateur",
        "profile": "Profil",
        "edit_profile": "Modifier le profil",
        "avatar_updated": "Avatar mis à jour",
        "read_receipts": "Accusés de lecture",
        "last_seen_visible": "Dernière connexion visible",
        "theme": "Thème",
        "wallpaper": "Fond d'écran",
        "away": "Absent",
        "busy": "Occupé",
        "available": "Disponible",
        "new_message": "Nouveau message",
        "no_message": "Aucun message",
        "delete_chat": "Supprimer le chat",
        "unmute_notifications_short": "Activer les notifications",
        "mute_short": "Muet",
        "remove_lock": "Retirer le verrou",
        "enable_lock": "Activer le verrou",
        "stay_here": "Rester ici",
        "coming_soon": "Bientôt disponible",
        "email_required": "Entrez votre e-mail",
        "email_invalid": "Entrez un e-mail valide",
        "password_required": "Entrez le mot de passe",
        "password_min_6": "Le mot de passe doit contenir au moins 6 caractères",
        "full_name_required": "Entrez votre nom complet",
        "name_min_2": "Le nom doit contenir au moins 2 caractères",
        "password_min_8": "Le mot de passe doit contenir au moins 8 caractères",
        "password_uppercase": "Le mot de passe doit contenir une majuscule",
        "password_number": "Le mot de passe doit contenir un chiffre",
        "confirm_password_required": "Confirmez le mot de passe",
        "fill_both_fields": "Remplissez les deux champs.",
        "error_change_password": "Erreur lors du changement de mot de passe.",
        "error_connection": "Erreur de connexion. Réessayez.",
        "new_password_label": "NOUVEAU MOT DE PASSE",
        "confirm_password_label": "CONFIRMER LE MOT DE PASSE",
        "hint_new_password": "Entrez le nouveau mot de passe",
        "hint_confirm_new_password": "Confirmez le nouveau mot de passe",
        "reset_password": "Réinitialiser le mot de passe",
        "reset_password_desc": "Entrez votre e-mail et nous vous enverrons un lien pour réinitialiser le mot de passe.",
        "send_reset_link": "Envoyer le lien de réinitialisation",
        "reset_link_sent": "Lien envoyé ! Vérifiez votre e-mail.",
        "hint_email": "Entrez votre e-mail",
        "hint_password": "Entrez votre mot de passe",
        "hint_full_name": "Entrez votre nom complet",
        "hint_confirm_password": "Confirmez le mot de passe",
        "terms_coming_soon": "Conditions d'utilisation — bientôt",
        "privacy_coming_soon": "Politique de confidentialité — bientôt",
        "google_signin_soon": "Connexion avec Google bientôt disponible",
        "apple_signin_soon": "Connexion avec Apple bientôt disponible",
    },
}
LANGS_EXTRA = {"de": get_de, "pt": get_pt}
for _name, _get in [("ru", get_ru), ("zh", get_zh), ("ja", get_ja), ("ar", get_ar),
    ("ko", get_ko), ("hi", get_hi), ("tr", get_tr), ("pl", get_pl), ("nl", get_nl), ("ro", get_ro)]:
    if _get is not None:
        LANGS_EXTRA[_name] = _get

def write_lang(code, data):
    out = {k: data.get(k, IT[k]) for k in KEYS}
    with open(os.path.join(BASE, f'{code}.json'), 'w', encoding='utf-8') as f:
        json.dump(out, f, ensure_ascii=False, indent=2)
    print(f"Written {code}.json")

def main():
    for code, data in TRANSLATIONS.items():
        if data is not None:
            write_lang(code, data)
    for code, get_data in LANGS_EXTRA.items():
        write_lang(code, get_data())

if __name__ == "__main__":
    main()
